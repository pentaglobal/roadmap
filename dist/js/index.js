$.extend(String.prototype,{replaceAll:function(n,t){return n instanceof RegExp?this.replace(n,t):this.replace(new RegExp(n,"gm"),t)},format:function(){var e=this;if(0<arguments.length){var n=1==arguments.length&&$.isArray(arguments[0])?arguments[0]:$.makeArray(arguments);$.each(n,function(n,t){e=e.replace(new RegExp("\\{"+n+"\\}","g"),t)})}return e},substitute:function(i){return i&&"object"==typeof i?this.replace(/\{([^{}]+)\}/g,function(n,t){var e=i[t];return void 0!==e?""+e:""}):this.toString()}}),$(function(){var n={tpl:"<li><a href='{url}'>{text}</a></li>",init:function(){var n;this.$wrap=$(".language-wrap");for(var t=0;t<config.language.length;t++){var e=config.language[t];this.$wrap.find(".language").append(this.tpl.substitute(e)),e.selected&&(n=e)}n||(n=config.language[0]),this.$wrap.find(".shows span").text(n.text),this.bindEvent()},bindEvent:function(){$(window).scroll(function(){70<$(this).scrollTop()?$(".main-header").addClass("nav-bg"):$(".main-header").removeClass("nav-bg")})}},t=function(){var n=$("#planPercent");for(var t in config.planPercent){var e=config.planPercent[t],i=n.find("[data-field="+t+"]");i.find(".progress-enter").css({width:e}),i.find(".percent").text(e)}},e={tpl:{tr:['<tr class="tr">','<td class="td"><ul></ul></td>','<td class="td"><ul></ul></td>','<td class="td"><ul></ul></td>','<td class="td"><ul></ul> </td>',"</tr>"].join(""),list:'<li class="{finishCls}"><b class="point">*</b>{name}</li>',quarterly:['<div class="quarterly">','  <span class="text">','    <span class="quarterly-name">{name}{desc}</span>',"  </span>","</div>"].join(""),star:'<span class="quarterly-icon animation"><img src="./img/star1.png"/></span>',github:'<span class="quarterly-icon animation1"><img src="./img/star2.png"/></span>',round:'<span class="quarterly-icon"><span class="icon-round"><i class="icon-round-inner"></i></span></span>'},init:function(){for(var n in config.planRoad){for(var t=$("#"+n),e=t.find(".plan-item-table"),i=config.planRoad[n],a=0;a<i.children.length;a++)this.renderTr(e,i.children[a],a);e.append(this.tpl.tr),this.renderPercent(t,i)}},renderPercent:function(n,t){if(t.percent){n.find(".completed b").html(t.percent),n.find(".completed").show();var e=n.find(".plan-item-header-percent");e.show(),e.css({clip:"rect(0px, "+e.outerWidth()*t.percent/100+"px, 120px, 0px)"})}},renderTr:function(n,t){var e=$(this.tpl.tr);if(t.iconType){t.name&&(t.name="<b>"+t.name+"<br></b>");var i=$(this.tpl.quarterly.substitute(t)),a="";a="star"==t.iconType?this.tpl.star:"github"==t.iconType?this.tpl.github:this.tpl.round,i.prepend(a),e.find("td").eq(0).append(i)}n.append(e),this.renderTd(e,t.children)},renderTd:function(n,t){for(var e=0;e<t.length;e++){var i=t[e],a=n.find("td").eq(e).find("ul");if(i&&i.length)for(var r=0;r<i.length;r++)i[r].finishCls=i[r].isFinish?"finish":"",a.append(this.tpl.list.substitute(i[r]))}}},i={tpl:['<div class="axis-item" style="top:{top}px">','  <span class="star"><img src="./img/star1.png"></span>','  <span class="year">{year}</span>',"</div>"].join(""),init:function(){for(var n=$(".roadmap-axis"),t=0;t<config.yearAxis.length;t++)n.append(this.tpl.substitute(config.yearAxis[t]))}};(function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)||($(window).resize(function(){var n=$(window).width();1200<=n?document.getElementsByTagName("body")[0].style.zoom=1:n<600||(document.getElementsByTagName("body")[0].style.zoom=n/1400)}),$(window).resize()),n.init(),t(),e.init(),i.init()})()});